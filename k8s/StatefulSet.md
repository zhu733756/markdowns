<!--
 * @Description: 
 * @version: 
 * @Author: zhu733756
 * @Date: 2020-08-31 13:48:52
 * @LastEditors: zhu733756
 * @LastEditTime: 2020-08-31 14:01:07
-->
## StatefulSet

## 拓扑关系

- 有状态应用
  - 分布式应用，它的多个实例之间，往往有依赖关系，比如：主从关系、主备关系
  - 数据存储类应用，它的多个实例，往往都会在本地磁盘上保存一份数据。而这些实例一旦被杀掉，即便重建出来，实例与数据之间的对应关系也已经丢失，从而导致应用失败
- 抽象
  - 拓扑状态。
    - 这种情况意味着，应用的多个实例之间不是完全对等的关系。这些应用实例，必须按照某些顺序启动，比如应用的主节点 A 要先于从节点 B 启动。而如果你把 A和 B 两个 Pod 删除掉，它们再次被创建出来时也必须严格按照这个顺序才行。并且，新创建出来的 Pod，必须和原来 Pod 的网络标识一样，这样原先的访问者才能使用同样的方法，访问到这个新 Pod。
  - 存储状态。
    - 这种情况意味着，应用的多个实例分别绑定了不同的存储数据。对于这些应用实例来说，Pod A 第一次读取到的数据，和隔了十分钟之后再次读取到的数据，应该是同一份，哪怕在此期间 Pod A 被重新创建过。这种情况最典型的例子，就是一个数据库应用的多个存储实例。所以，StatefulSet 的核心功能，就是通过某种方式记录这些状态，然后在 Pod 被重新创建时，能够为新 Pod 恢复这些状态。

- 核心功能
  - 通过某种方式记录这些状态，然后在 Pod 被重新创建时，能够为新 Pod 恢复这些状态

- Service 是 Kubernetes 项目中用来将一组 Pod 暴露给外界访问的一种机制
  -  Service 的 VIP（Virtual IP，即：虚拟 IP）代理到pod ip方式
  -  DNS方式，不需要代理，直接访问pod ip 【无头service，通过label选择器】

